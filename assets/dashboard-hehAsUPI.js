import{r,j as t,E as p,a as f}from"./index-DcZ7CnYI.js";import{u as x,A as D}from"./use-activity-BiMOFnz_.js";import{T,a as b}from"./trend-cards-skeleton-CbrQKqPd.js";import{u as v,D as C,a as j}from"./data-table-D1h3CMji.js";function k(n,a){const e=n.length,s=n.filter(o=>o.status==="Done").length,u=new Set(n.map(o=>o.reviewer?.name).filter(o=>!!o)).size,i=a.reduce((o,g)=>o+g.desktop+g.mobile,0),l=a[a.length-1],c=a[a.length-2],m=l.desktop+l.mobile,h=c.desktop+c.mobile,d=h===0?0:(m-h)/h*100;return[{id:"total-visitors",label:"Total Visitors",value:i,change:`${d>0?"+":""}${d.toFixed(1)}%`,changeVariant:d>=0?"up":"down",headerText:d>=0?"Traffic increased recently":"Traffic decreased recently",footerText:"Desktop + Mobile"},{id:"total-documents",label:"Documents",value:e,change:"+0%",changeVariant:"up",headerText:"Total documents in the system",footerText:"Not affected by filtering"},{id:"completed-documents",label:"Completed",value:s,change:e===0?"0%":`${(s/e*100).toFixed(1)}%`,changeVariant:"up",headerText:"Completion progress",footerText:"Documents marked Done"},{id:"active-reviewers",label:"Active Reviewers",value:u,change:"+0%",changeVariant:"up",headerText:"Unique reviewers assigned",footerText:"Based on document data"}]}function S(){const[n,a]=r.useState(90),{data:e=[]}=x(n),{data:s=[],isLoading:u}=v(),[i,l]=r.useState();r.useEffect(()=>{e.length>0&&s.length>0&&l(k(s,e))},[e,s]);const[c,m]=r.useState([]);return r.useEffect(()=>{e.length!=0&&m(e)},[e]),t.jsxs("div",{className:"flex flex-col gap-4 md:gap-6",children:[t.jsx(p,{FallbackComponent:f,children:i?t.jsx(b,{data:i}):t.jsx(T,{})}),t.jsx(p,{FallbackComponent:f,children:t.jsx(D,{data:c,dateRange:n,setDateRange:a})}),t.jsx(p,{FallbackComponent:f,children:u?t.jsx(C,{isCompact:!0}):t.jsx(j,{isCompact:!0,data:s})})]})}export{S as default};
